<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 13 Advanced Wrangling | PSYC193L</title>
<meta name="author" content="Ethan Hurwitz">
<meta name="description" content="library(tidyverse) # Load tidyverse packages This dataset used in examples throughout, called HELPfull (mosaicData::HELPfull), contains data from the Health Evaluation and Linkage to Primary Care...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 13 Advanced Wrangling | PSYC193L">
<meta property="og:type" content="book">
<meta property="og:url" content="https://psyc193l.github.io/advanced-wrangling.html">
<meta property="og:description" content="library(tidyverse) # Load tidyverse packages This dataset used in examples throughout, called HELPfull (mosaicData::HELPfull), contains data from the Health Evaluation and Linkage to Primary Care...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 13 Advanced Wrangling | PSYC193L">
<meta name="twitter:description" content="library(tidyverse) # Load tidyverse packages This dataset used in examples throughout, called HELPfull (mosaicData::HELPfull), contains data from the Health Evaluation and Linkage to Primary Care...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1.9000/transition.js"></script><script src="libs/bs3compat-0.3.1.9000/tabs.js"></script><script src="libs/bs3compat-0.3.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">PSYC193L</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Syllabus</a></li>
<li class="book-part">R Basics</li>
<li><a class="" href="why-use-r.html"><span class="header-section-number">2</span> Why use R?</a></li>
<li><a class="" href="r-coding-basics.html"><span class="header-section-number">3</span> R Coding Basics</a></li>
<li><a class="" href="using-r-effectively.html"><span class="header-section-number">4</span> Using R Effectively</a></li>
<li class="book-part">Visualizations</li>
<li><a class="" href="intro-to-ggplot2.html"><span class="header-section-number">5</span> Intro to ggplot2</a></li>
<li><a class="" href="aesthetics.html"><span class="header-section-number">6</span> Aesthetics</a></li>
<li><a class="" href="different-geoms-and-when-to-use-them.html"><span class="header-section-number">7</span> Different Geoms and When To Use Them</a></li>
<li><a class="" href="customization.html"><span class="header-section-number">8</span> Customization</a></li>
<li><a class="" href="color-theory.html"><span class="header-section-number">9</span> Color Theory</a></li>
<li class="book-part">Data Manipulation</li>
<li><a class="" href="control-flow.html"><span class="header-section-number">10</span> Control Flow</a></li>
<li><a class="" href="tidy-data-and-tidyverse.html"><span class="header-section-number">11</span> Tidy Data and Tidyverse</a></li>
<li><a class="" href="basic-wrangling.html"><span class="header-section-number">12</span> Basic Wrangling</a></li>
<li><a class="active" href="advanced-wrangling.html"><span class="header-section-number">13</span> Advanced Wrangling</a></li>
<li><a class="" href="summarizing-data.html"><span class="header-section-number">14</span> Summarizing Data</a></li>
<li><a class="" href="text-cleaning.html"><span class="header-section-number">15</span> Text Cleaning</a></li>
<li><a class="" href="data-transformation.html"><span class="header-section-number">16</span> Data Transformation</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="advanced-wrangling" class="section level1" number="13">
<h1>
<span class="header-section-number">13</span> Advanced Wrangling<a class="anchor" aria-label="anchor" href="#advanced-wrangling"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb287"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span> <span class="co"># Load tidyverse packages</span></code></pre></div>
<!-- <a href="exercises/Exercise_Manip3.Rmd" download>Exercise Sheet</a> -->
<p>This dataset used in examples throughout, called <code>HELPfull</code> (<code><a href="https://rdrr.io/pkg/mosaicData/man/HELPfull.html">mosaicData::HELPfull</a></code>), contains data from the <strong>H</strong>ealth <strong>E</strong>valuation and <strong>L</strong>inkage to <strong>P</strong>rimary Care study. From the dataset’s description:</p>
<ul>
<li>“The HELP study was a clinical trial for adult inpatients recruited from a detoxification unit. Patients with no primary care physician were randomized to receive a multidisciplinary assessment and a brief motivational intervention or usual care, with the goal of linking them to primary medical care.”</li>
</ul>
<p>This data is saved in a variable called <code>dat</code>.</p>
<p>This dataset is <strong><em>massive</em></strong>, so it is not even worth using <code><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse()</a></code> to preview it.</p>
<div class="sourceCode" id="cb288"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>
<span class="co">#&gt; [1] 788</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>
<span class="co">#&gt; [1] 1472</span></code></pre></div>
<p>It contains 788(!!) variables from 1472 observations!!! Throughout, as has been done previously, a <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> call will be added at the end of most of the code just to prevent having a <strong><em>giant</em></strong> output in every block!</p>
<div id="helper-functions" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Selecting<a class="anchor" aria-label="anchor" href="#helper-functions"><i class="fas fa-link"></i></a>
</h2>
<p>One of the first data wrangle tools we learned back in Lab 2 was <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> was introduced <a href="basic-wrangling.html#select">previously</a> as a way to return only specific columns from your df. In this case, there are a <strong>TON</strong> of variables, and it would be quite annoying to have to explicitly specify all of them that you want by full name. Luckily, there are a number of <strong><u>helper functions</u></strong> that you can use with <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to help make selecting variables easier. What they do is select the variable names you want by <em>matching</em> them based on some specified criteria.</p>
<div id="starts_with" class="section level3" number="13.1.1">
<h3>
<span class="header-section-number">13.1.1</span> <code>starts_with()</code><a class="anchor" aria-label="anchor" href="#starts_with"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code> will select all variables that <strong>start</strong> with a specified pattern.</p>
<div class="sourceCode" id="cb289"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"RAW"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   RAWPF RAWRP RAWBP RAWGH RAWVT RAWSF RAWRE RAWMH RAW_RE</span>
<span class="co">#&gt; 1    28     7   9.4  21.4    13     4     4    15     33</span>
<span class="co">#&gt; 2    28     8  10.0  21.4    19     9     6    23     24</span>
<span class="co">#&gt; 3    30     8   8.2  22.4    16    10     6    27     15</span>
<span class="co">#&gt; 4    29     8  10.4  19.0    20    10     6    27     29</span>
<span class="co">#&gt; 5    21     4   8.1   7.0     9     6     3    13     34</span>
<span class="co">#&gt; 6    30     8  12.0  18.4    15     9     5    21     35</span>
<span class="co">#&gt;   RAW_AM RAW_TS RAW_ADS</span>
<span class="co">#&gt; 1     14     38       5</span>
<span class="co">#&gt; 2     12     33      NA</span>
<span class="co">#&gt; 3      8     36      NA</span>
<span class="co">#&gt; 4     13     37      NA</span>
<span class="co">#&gt; 5      8     30      26</span>
<span class="co">#&gt; 6      7     18      NA</span></code></pre></div>
</div>
<div id="ends_with" class="section level3" number="13.1.2">
<h3>
<span class="header-section-number">13.1.2</span> <code>ends_with()</code><a class="anchor" aria-label="anchor" href="#ends_with"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code> will select all variables that <strong>end</strong> with a specified pattern.</p>
<div class="sourceCode" id="cb290"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"ABUSE"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   PHYABUSE SEXABUSE FAMABUSE STRABUSE ABUSE</span>
<span class="co">#&gt; 1        1        1        1        1     1</span>
<span class="co">#&gt; 2       NA       NA       NA       NA    NA</span>
<span class="co">#&gt; 3       NA       NA       NA       NA    NA</span>
<span class="co">#&gt; 4       NA       NA       NA       NA    NA</span>
<span class="co">#&gt; 5        1        0        1        0     1</span>
<span class="co">#&gt; 6       NA       NA       NA       NA    NA</span></code></pre></div>
<div class="panel panel-success">
<div class="panel-heading">
<strong>EXERCISE 1</strong>
</div>
<div class="panel-body">
Use helper functions to…<br>
1. Select all columns that start with “sleep.”<br>
2. Select all columns that end with “wt.”
</div>
</div>
</div>
<div id="contains" class="section level3" number="13.1.3">
<h3>
<span class="header-section-number">13.1.3</span> <code>contains()</code><a class="anchor" aria-label="anchor" href="#contains"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code> selects variables if their name <strong>contains</strong> a specified pattern.</p>
<div class="sourceCode" id="cb291"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"RISK"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   DRUGRISK SEXRISK</span>
<span class="co">#&gt; 1        0       4</span>
<span class="co">#&gt; 2        0       1</span>
<span class="co">#&gt; 3        0       1</span>
<span class="co">#&gt; 4        0       3</span>
<span class="co">#&gt; 5        0       7</span>
<span class="co">#&gt; 6        0       0</span></code></pre></div>
<p>This also works on special characters.</p>
<div class="sourceCode" id="cb292"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"_"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Take just the first 7 columns</span>
  <span class="co"># to save space</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   NUM_INTERVALS INT_TIME1 DAYS_SINCE_BL INT_TIME2</span>
<span class="co">#&gt; 1             1  0.000000            NA  6.000000</span>
<span class="co">#&gt; 2             1  8.033333           241  8.033333</span>
<span class="co">#&gt; 3             2 15.533333           466  7.500000</span>
<span class="co">#&gt; 4             1 27.566667           827 12.033333</span>
<span class="co">#&gt; 5             1  0.000000            NA  6.000000</span>
<span class="co">#&gt; 6             1  6.366667           191  6.366667</span>
<span class="co">#&gt;   DAYS_SINCE_PREV PREV_TIME A14G_T</span>
<span class="co">#&gt; 1              NA        NA       </span>
<span class="co">#&gt; 2             241         0       </span>
<span class="co">#&gt; 3             225         6       </span>
<span class="co">#&gt; 4             361        18       </span>
<span class="co">#&gt; 5              NA        NA       </span>
<span class="co">#&gt; 6             191         0   JAIL</span></code></pre></div>
<div class="panel panel-success">
<div class="panel-heading">
<strong>EXERCISE 2</strong>
</div>
<div class="panel-body">
Select all columns that contain “re.”
</div>
</div>
</div>
<div id="matches" class="section level3" number="13.1.4">
<h3>
<span class="header-section-number">13.1.4</span> <code>matches()</code><a class="anchor" aria-label="anchor" href="#matches"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code> works similarly to <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code> but uses <a href="advanced-wrangling.html#regex">regular expressions</a> (more on these below) rather than patterns.</p>
<div class="sourceCode" id="cb293"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"[[:digit:]]"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Take just the first 7 columns</span>
  <span class="co"># to save space</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   INT_TIME1 INT_TIME2 A1 A9 A10 A11A A11B</span>
<span class="co">#&gt; 1  0.000000  6.000000  1  9   1    1    0</span>
<span class="co">#&gt; 2  8.033333  8.033333 NA NA   2    1    0</span>
<span class="co">#&gt; 3 15.533333  7.500000 NA NA   1    1    0</span>
<span class="co">#&gt; 4 27.566667 12.033333 NA NA   4    1    0</span>
<span class="co">#&gt; 5  0.000000  6.000000  1 12   6    1    0</span>
<span class="co">#&gt; 6  6.366667  6.366667 NA NA   6    1    0</span></code></pre></div>
</div>
<div id="num_range" class="section level3" number="13.1.5">
<h3>
<span class="header-section-number">13.1.5</span> <code>num_range()</code><a class="anchor" aria-label="anchor" href="#num_range"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">num_range()</a></code> matches a series of columns that has a string ending with a numerical range, e.g., x01, x02, x03.</p>
<div class="sourceCode" id="cb294"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">num_range</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   M1 M2 M3 M4 M5 M6 M7 M8 M9 M10 M11 M12 M13 M14 M15</span>
<span class="co">#&gt; 1  1  1  1  1  1  1  1  1  1   1   0   1   1   1   1</span>
<span class="co">#&gt; 2  0  1  0  0  1  0  0  0  0   0   0   1   0   0   0</span>
<span class="co">#&gt; 3  0  0  0  0  0  0  0  0  0   0   0   0   0   0   0</span>
<span class="co">#&gt; 4  0  0  0  0  3  0  1  2  0   2   0   2   2   1   0</span>
<span class="co">#&gt; 5  1  1  1  1  1  1  1  1  1   1   1   1   1   1   0</span>
<span class="co">#&gt; 6  1  0  0  0  1  0  0  0  0   0   0   0   0   0   1</span></code></pre></div>
</div>
<div id="last_col" class="section level3" number="13.1.6">
<h3>
<span class="header-section-number">13.1.6</span> <code>last_col()</code><a class="anchor" aria-label="anchor" href="#last_col"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tidyselect.r-lib.org/reference/everything.html">last_col()</a></code> selects the last column in a df. This can be especially helpful when paired with other functions. For example, when positioning columns in mutate or relocate:</p>
<div class="sourceCode" id="cb295"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>newRow <span class="op">=</span> <span class="st">"test"</span>, .after <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">last_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">last_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   newRow</span>
<span class="co">#&gt; 1   test</span>
<span class="co">#&gt; 2   test</span>
<span class="co">#&gt; 3   test</span>
<span class="co">#&gt; 4   test</span>
<span class="co">#&gt; 5   test</span>
<span class="co">#&gt; 6   test</span></code></pre></div>
<div class="rmdimportant">
<p><strong>This creates a new variable after the last column in the df, and then selects the last column (which is now the newly created variable).</strong></p>
</div>
</div>
<div id="all_of" class="section level3" number="13.1.7">
<h3>
<span class="header-section-number">13.1.7</span> <code>all_of()</code><a class="anchor" aria-label="anchor" href="#all_of"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of()</a></code> matches variable names in a character vector. <strong>All</strong> names must be present, otherwise an error is thrown. In this way, <code><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of()</a></code> is good when strict selection is needed and an error could have wide ranging consequences.</p>
<div class="sourceCode" id="cb296"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DRUGRISK"</span>, <span class="st">"SEXRISK"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   DRUGRISK SEXRISK</span>
<span class="co">#&gt; 1        0       4</span>
<span class="co">#&gt; 2        0       1</span>
<span class="co">#&gt; 3        0       1</span>
<span class="co">#&gt; 4        0       3</span>
<span class="co">#&gt; 5        0       7</span>
<span class="co">#&gt; 6        0       0</span></code></pre></div>
<div class="sourceCode" id="cb297"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DRUGRISK"</span>, <span class="st">"DRUGRISK2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Error in `select()`:</span>
<span class="co">#&gt; ! Can't subset columns that don't exist.</span>
<span class="co">#&gt; x Column `DRUGRISK2` doesn't exist.</span></code></pre></div>
<div class="rmdimportant">
<p><strong>The <code>DRUGRISK2</code> variable does not exist in this dataset. Thus, the 2nd code chunk will throw an error.</strong></p>
</div>
</div>
<div id="any_of" class="section level3" number="13.1.8">
<h3>
<span class="header-section-number">13.1.8</span> <code>any_of()</code><a class="anchor" aria-label="anchor" href="#any_of"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of()</a></code> works the same as <code><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of()</a></code>, except that <strong>no error is thrown</strong> for names that do not exist. It will only return the columns from the input that are found in the data and ignore the ones that are not.</p>
<div class="sourceCode" id="cb298"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DRUGRISK"</span>, <span class="st">"SEXRISK"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   DRUGRISK SEXRISK</span>
<span class="co">#&gt; 1        0       4</span>
<span class="co">#&gt; 2        0       1</span>
<span class="co">#&gt; 3        0       1</span>
<span class="co">#&gt; 4        0       3</span>
<span class="co">#&gt; 5        0       7</span>
<span class="co">#&gt; 6        0       0</span>
<span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"DRUGRISK"</span>, <span class="st">"DRUGRISK2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   DRUGRISK</span>
<span class="co">#&gt; 1        0</span>
<span class="co">#&gt; 2        0</span>
<span class="co">#&gt; 3        0</span>
<span class="co">#&gt; 4        0</span>
<span class="co">#&gt; 5        0</span>
<span class="co">#&gt; 6        0</span></code></pre></div>
<p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of()</a></code> is particularly useful when removing variables from your df, since there will be no error if you are including a variable that already does not exist. In this way, it can be used to make sure a variable is truly removed.</p>
</div>
<div id="where" class="section level3" number="13.1.9">
<h3>
<span class="header-section-number">13.1.9</span> <code>where()</code><a class="anchor" aria-label="anchor" href="#where"><i class="fas fa-link"></i></a>
</h3>
<p><code>where()</code> takes a function and returns all variables for which the function returns <code>TRUE</code>. For example, say you wanted to find how many quantitative variables there are in this df.</p>
<div class="sourceCode" id="cb299"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 782</span></code></pre></div>
<p class="text-info">
<strong>Note: We don’t <u>call</u> the function by including parentheses after it, we just <em>NAME</em> the function.</strong>
</p>
<button class="btn btn-primary" data-toggle="collapse" data-target="#BlockName">
How the Syntax Works
</button>
<div id="BlockName" class="collapse">
<p>Under the hood of <code>where()</code>, it just needs a function. This means it can take functions that are designed on the spot.</p>
<p>The long form version of the code above would be the following:</p>
<div class="sourceCode" id="cb300"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 782</span></code></pre></div>
<p>Where you define the function that calls <code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code> inline. A slightly condensed version of this inline defining looks like this:</p>
<div class="sourceCode" id="cb301"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 782</span></code></pre></div>
<p>You can replace the <code>function(x)</code> part with a <code>~</code>. Note that you need <code>.</code> before the <code>x</code> here though!</p>
<p>This inline shorthand is really useful because it allows you to string multiple functions together using logic statements. For example, you could first select all the abuse columns, then only the columns that are numeric and have a mean larger than 1.</p>
<div class="sourceCode" id="cb302"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"ABUSE"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"ABUSE"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   ABUSE2 ABUSE3</span>
<span class="co">#&gt; 1      3      2</span>
<span class="co">#&gt; 2      1      1</span>
<span class="co">#&gt; 3      1      1</span>
<span class="co">#&gt; 4      3      2</span>
<span class="co">#&gt; 5      0      0</span>
<span class="co">#&gt; 6      0      0</span></code></pre></div>
<p>Breaking this down line by line:</p>
<ul>
<li>
<code>dat %&gt;%</code> take the <code>dat</code> dataframe</li>
<li>
<code>drop_na(contains("ABUSE")) %&gt;%</code> get rid of the <code>NA</code> values in all the columns used, because it will mess things up otherwise (note that you can use the selection helper functions here too!).</li>
<li>
<code>select(contains("ABUSE")) %&gt;%</code> select only the columns that contain “ABUSE”</li>
<li>
<code>select(where(~ is.numeric(.x) &amp;&amp; mean(.x) &gt; 1)) %&gt;%</code> select only the columns that are numeric AND have a mean greater than 1</li>
<li>
<code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> show just the first 5 observations</li>
</ul>
<p class="text-info">
<strong>NOTE: You are not looking for the mean of the column, the output <em>IS</em> the column that has a mean greater than 1. Remember, selection helper functions are to help select certain columns. You can just get VERY specific with which columns you want in this way!</strong>
</p>
</div>
<p><br></p>
<div class="panel panel-success">
<div class="panel-heading">
<strong>EXERCISE 3</strong>
</div>
<div class="panel-body">
Use <code>where()</code> to select…<br><br>
1. All columns that are <em>numeric</em>.<br>
2. All columns that are <em>characters</em>.
</div>
</div>
</div>
<div id="misc-selecting" class="section level3" number="13.1.10">
<h3>
<span class="header-section-number">13.1.10</span> Misc Selecting<a class="anchor" aria-label="anchor" href="#misc-selecting"><i class="fas fa-link"></i></a>
</h3>
<p>Logical operators work as expected and can be used to create tests with multiple helper functions for even more specified selecting!</p>
<div class="sourceCode" id="cb303"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"RAW"</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"ABUSE"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   RAWPF RAWRP RAWBP RAWGH RAWVT RAWSF RAWRE RAWMH RAW_RE</span>
<span class="co">#&gt; 1    28     7   9.4  21.4    13     4     4    15     33</span>
<span class="co">#&gt; 2    28     8  10.0  21.4    19     9     6    23     24</span>
<span class="co">#&gt; 3    30     8   8.2  22.4    16    10     6    27     15</span>
<span class="co">#&gt; 4    29     8  10.4  19.0    20    10     6    27     29</span>
<span class="co">#&gt; 5    21     4   8.1   7.0     9     6     3    13     34</span>
<span class="co">#&gt; 6    30     8  12.0  18.4    15     9     5    21     35</span>
<span class="co">#&gt;   RAW_AM RAW_TS RAW_ADS ABUSE2 ABUSE3 ABUSE</span>
<span class="co">#&gt; 1     14     38       5      3      2     1</span>
<span class="co">#&gt; 2     12     33      NA     NA     NA    NA</span>
<span class="co">#&gt; 3      8     36      NA     NA     NA    NA</span>
<span class="co">#&gt; 4     13     37      NA     NA     NA    NA</span>
<span class="co">#&gt; 5      8     30      26      1      1     1</span>
<span class="co">#&gt; 6      7     18      NA     NA     NA    NA</span>
<span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"A"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"C"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   A11C A14C A15C A16C A17C A12B_REC</span>
<span class="co">#&gt; 1    1    0    0    0    0        1</span>
<span class="co">#&gt; 2    1    0    0   NA    0       NA</span>
<span class="co">#&gt; 3    1    0    0   NA    0       NA</span>
<span class="co">#&gt; 4    1    0    0   NA    0       NA</span>
<span class="co">#&gt; 5    1    0   12   49    0        1</span>
<span class="co">#&gt; 6    1    0  178   NA    0       NA</span></code></pre></div>
<p>Selection helper functions can be negated with a <code>!</code></p>
<p>Below, only the number of columns is shown to save space, but note the difference!</p>
<p>First look at how many variables there are total:</p>
<div class="sourceCode" id="cb304"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 788</span></code></pre></div>
<p>Then see how many there are that start with “RAW”:</p>
<div class="sourceCode" id="cb305"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"RAW"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 12</span></code></pre></div>
<p>Then see how many there are after selecting <em>NOT</em> the columns that start with “RAW”:</p>
<div class="sourceCode" id="cb306"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"RAW"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 776</span></code></pre></div>
<p>The total number of columns has decreased by exactly the number of columns that start with “RAW!”</p>
<div class="panel panel-success">
<div class="panel-heading">
<strong>EXERCISE 4</strong>
</div>
<div class="panel-body">
User helper functions to select the columns that…<br><br>
1. Contain “re” and are <em>numeric</em> data.<br>
2. End with “e” and do not start with “sleep.”
</div>
</div>
</div>
</div>
<div id="filtering" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> Filtering<a class="anchor" aria-label="anchor" href="#filtering"><i class="fas fa-link"></i></a>
</h2>
<p>There are two <code>if_*()</code> functions which apply the same test function to a selection of columns and combine the results into a single logical vector (a vector of <code>TRUE</code> and <code>FALSE</code>). <strong>Since you are dealing with logical vectors, this is good for <em>filtering</em>!</strong></p>
<div id="if_any" class="section level3" number="13.2.1">
<h3>
<span class="header-section-number">13.2.1</span> <code>if_any()</code><a class="anchor" aria-label="anchor" href="#if_any"><i class="fas fa-link"></i></a>
</h3>
<p>Returns <code>TRUE</code> when the test evaluates to <code>TRUE</code> for <em>any</em> of the selected columns.</p>
<div class="sourceCode" id="cb307"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Show the number of rows and columns in the full df</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>
<span class="co">#&gt; [1] 1472  788</span>
<span class="co"># Show the number of rows and columns for</span>
<span class="co"># All observations where at least one of the selected</span>
<span class="co"># Variables has a score above 75:</span>
<span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">if_any</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"I"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"[[:digit:]]"</span><span class="op">)</span>, <span class="op">~</span> <span class="va">.</span> <span class="op">&gt;</span> <span class="fl">75</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 625 788</span></code></pre></div>
<p class="text-info">
<strong>Note: To save space <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> was added here. However, without that, it will just output the actual rows of data like any other filter call would.</strong>
</p>
<p>Notice how the number of columns (second value) stays the same, but the number of rows (first value) differs!</p>
<p>To break down the unique syntax here:</p>
<ul>
<li>It is filtering for observations where any of the columns that start with “I” and also contain a digit in the column name have a score/value greater than 75.</li>
</ul>
<p>So what is a use case for this? Maybe you have a suicidality questionnaire in your dataset and a participant who responds greater than <span class="math inline">\(X\)</span> on any of the questions needs to be contacted for emergency intervention. There are many questions on your suicidality questionnaire (the columns that start with “I” here), and this is a way to quickly filter for the people who responded with greater than 75 on <strong>ANY</strong> of those questions!</p>
<div class="panel panel-success">
<div class="panel-heading">
<strong>EXERCISE 5</strong>
</div>
<div class="panel-body">
<ol style="list-style-type: decimal">
<li>Filter for observations where scores in any variable that ends with “wt” is above 35.<br>
</li>
<li>Filter for observations where scores in any variable that starts with “sleep” is less than 2.
</li>
</ol>
</div>

</div>
</div>
<div id="if_all" class="section level3" number="13.2.2">
<h3>
<span class="header-section-number">13.2.2</span> <code>if_all()</code><a class="anchor" aria-label="anchor" href="#if_all"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/across.html">if_all()</a></code> is similar to <code><a href="https://dplyr.tidyverse.org/reference/across.html">if_any()</a></code>, except it returns <code>TRUE</code> <strong>only</strong> when the test evaluates to <code>TRUE</code> for <strong>ALL</strong> of the selected columns.</p>
<div class="sourceCode" id="cb308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Show the number of rows and columns for</span>
<span class="co"># the observations where ALL of the selected</span>
<span class="co"># variables has a score above 75:</span>
<span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">if_all</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"I"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"[[:digit:]]"</span><span class="op">)</span>, <span class="op">~</span> <span class="va">.</span> <span class="op">&gt;</span> <span class="fl">75</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1]   0 788</span></code></pre></div>
<p>Importantly, these functions will not give you an error if you do something incorrect (whereas using <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> would). Since you are dealing with logical vectors and tests, having nothing return is not inherently indicative of a problem!</p>
<p>Look what happens when we try this on columns that we know do not exist (there are no columns that start with “Y”).</p>
<div class="sourceCode" id="cb309"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; data frame with 0 columns and 1472 rows</span>
<span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">if_all</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span>, <span class="op">~</span> <span class="va">.</span> <span class="op">&gt;</span> <span class="fl">75</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 1472  788</span></code></pre></div>
</div>
</div>
<div id="mutating-across" class="section level2" number="13.3">
<h2>
<span class="header-section-number">13.3</span> Mutating <code>across()</code><a class="anchor" aria-label="anchor" href="#mutating-across"><i class="fas fa-link"></i></a>
</h2>
<p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> was <a href="basic-wrangling.html#Modifying-Existing-Variables">previously</a> used to make changes to the data in our columns. To do so, you had to specify the specific column you wanted to change and what you wanted to do to it. However, utilizing the <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> function, you can instead apply some changes to <strong>multiple</strong> columns simultaneously!</p>
<p>From the tidyverse website:</p>
<p>“<code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> makes it easy to apply the same transformation to multiple columns, allowing you to use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> semantics (like helper functions) inside”data-masking" functions like <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>. R code in dplyr verbs is generally evaluated once per group. Inside <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> however, code is evaluated once for each combination of columns and groups!"</p>
<p>For example, you can apply some function/code to specific variables:</p>
<div class="sourceCode" id="cb310"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Q2"</span>, <span class="st">"Q3"</span><span class="op">)</span>, <span class="va">scale</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Q2"</span>, <span class="st">"Q3"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;            Q2         Q3</span>
<span class="co">#&gt; 1  -0.3443861 -0.3158289</span>
<span class="co">#&gt; 2  -0.3443861 -0.3158289</span>
<span class="co">#&gt; 3  -0.3443861 -0.3158289</span>
<span class="co">#&gt; 4  -0.3443861 -0.3158289</span>
<span class="co">#&gt; 5  -0.3443861 -0.3158289</span>
<span class="co">#&gt; 6  -0.3443861 -0.3158289</span>
<span class="co">#&gt; 7   2.9017304  5.3304180</span>
<span class="co">#&gt; 8   2.9017304  3.4483357</span>
<span class="co">#&gt; 9   2.9017304  5.3304180</span>
<span class="co">#&gt; 10 -0.3443861 -0.3158289</span></code></pre></div>
<p>You can use helper functions to make these selections as well!</p>
<div class="sourceCode" id="cb311"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"Q"</span><span class="op">)</span>, <span class="va">scale</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"Q"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Take just the first 7 columns</span>
  <span class="co"># to save space</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;           Q1A       Q1B         Q2         Q3         Q4</span>
<span class="co">#&gt; 1   1.3247918 -0.471342 -0.3443861 -0.3158289 -0.2700594</span>
<span class="co">#&gt; 2          NA -0.471342 -0.3443861 -0.3158289 -0.2700594</span>
<span class="co">#&gt; 3          NA -0.471342 -0.3443861 -0.3158289 -0.2700594</span>
<span class="co">#&gt; 4          NA -0.471342 -0.3443861 -0.3158289 -0.2700594</span>
<span class="co">#&gt; 5   1.3247918 -0.471342 -0.3443861 -0.3158289 -0.2700594</span>
<span class="co">#&gt; 6          NA -0.471342 -0.3443861 -0.3158289 -0.2700594</span>
<span class="co">#&gt; 7   1.3247918  2.120156  2.9017304  5.3304180  1.4294526</span>
<span class="co">#&gt; 8          NA  2.120156  2.9017304  3.4483357  4.8284766</span>
<span class="co">#&gt; 9          NA  2.120156  2.9017304  5.3304180 -0.2700594</span>
<span class="co">#&gt; 10 -0.7532261 -0.471342 -0.3443861 -0.3158289 -0.2700594</span>
<span class="co">#&gt;            Q5         Q6</span>
<span class="co">#&gt; 1   1.3360441 -0.2731168</span>
<span class="co">#&gt; 2  -0.6042744 -0.2731168</span>
<span class="co">#&gt; 3  -0.6042744 -0.2731168</span>
<span class="co">#&gt; 4  -0.6042744 -0.2731168</span>
<span class="co">#&gt; 5   2.3062033 -0.2731168</span>
<span class="co">#&gt; 6  -0.6042744 -0.2731168</span>
<span class="co">#&gt; 7  -0.6042744  4.9244139</span>
<span class="co">#&gt; 8   0.3658848 -0.2731168</span>
<span class="co">#&gt; 9  -0.6042744  4.9244139</span>
<span class="co">#&gt; 10 -0.6042744 -0.2731168</span></code></pre></div>
<p>You can combine <code>where()</code> with <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> to mutate conditionally. In other words, <strong>IF</strong> the column passes some test, the function will be applied to all its values.</p>
<p>Consider the following scenario: say you wanted to convert all the <em>factors</em> to <em>characters</em>.</p>
<p>First, you would check which columns contain <em>factors</em>:</p>
<div class="sourceCode" id="cb312"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.factor</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1,472</span>
<span class="co">#&gt; Columns: 6</span>
<span class="co">#&gt; $ A14G_T &lt;fct&gt; "", "", "", "", "", "JAIL", "", "JAIL", "",…</span>
<span class="co">#&gt; $ A17I_T &lt;fct&gt; , , , , , , , , FOOD STAMPS, , , , , , , , …</span>
<span class="co">#&gt; $ C3F_T  &lt;fct&gt; "", "", "", "", "", "", "", "", "", "", "",…</span>
<span class="co">#&gt; $ U2Q_T  &lt;fct&gt; "", "", "", "", "", "", "", "", "NO NEED TO…</span>
<span class="co">#&gt; $ U2R    &lt;fct&gt; , A, A, A, , H, , H, Q, , A, H, P, , H, D, …</span>
<span class="co">#&gt; $ U7A_T  &lt;fct&gt; "", "", "", "", "", "", "", "", "", "", "",…</span></code></pre></div>
<p>Next, you can use <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> and <code>where()</code> to change only columns that are <em>factors</em> into <em>characters</em>, checking which columns are <em>characters</em>. The columns that were previously <em>factors</em> should show up here.</p>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.factor</span><span class="op">)</span>, <span class="va">as.character</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1,472</span>
<span class="co">#&gt; Columns: 6</span>
<span class="co">#&gt; $ A14G_T &lt;chr&gt; "", "", "", "", "", "JAIL", "", "JAIL", "",…</span>
<span class="co">#&gt; $ A17I_T &lt;chr&gt; "", "", "", "", "", "", "", "", "FOOD STAMP…</span>
<span class="co">#&gt; $ C3F_T  &lt;chr&gt; "", "", "", "", "", "", "", "", "", "", "",…</span>
<span class="co">#&gt; $ U2Q_T  &lt;chr&gt; "", "", "", "", "", "", "", "", "NO NEED TO…</span>
<span class="co">#&gt; $ U2R    &lt;chr&gt; "", "A", "A", "A", "", "H", "", "H", "Q", "…</span>
<span class="co">#&gt; $ U7A_T  &lt;chr&gt; "", "", "", "", "", "", "", "", "", "", "",…</span></code></pre></div>
<p>Which they do!</p>
<p>You also can apply multiple functions by <code>list</code>ing them. For example:</p>
<div class="sourceCode" id="cb314"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"Z"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">log</span>, <span class="va">round</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;    Z1  Z2     Z1_1 Z1_2     Z2_1 Z2_2</span>
<span class="co">#&gt; 1  NA  NA       NA   NA       NA   NA</span>
<span class="co">#&gt; 2   0  NA     -Inf    0       NA   NA</span>
<span class="co">#&gt; 3   0  NA     -Inf    0       NA   NA</span>
<span class="co">#&gt; 4 999 999 6.906755  999 6.906755  999</span>
<span class="co">#&gt; 5  NA  NA       NA   NA       NA   NA</span>
<span class="co">#&gt; 6 999 999 6.906755  999 6.906755  999</span></code></pre></div>
<p>As before, multiple helper functions can be strung together and they can also be negated with <code>!</code>.</p>
<div class="panel panel-success">
<div class="panel-heading">
<strong>EXERCISE 6</strong>
</div>
<div class="panel-body">
Use helper functions to…<br>
1. Round all the columns that are <em>numeric</em>.<br>
2. Round only the columns that are <em>numeric</em> and start with “sleep.”<br>
3. <code><a href="https://rdrr.io/r/base/scale.html">scale()</a></code> the columns that end with “wt” and are <em>numeric</em>, then filter the results for only those where all columns that end with “wt” are greater than 0.
</div>
</div>
</div>
<div id="regex" class="section level2" number="13.4">
<h2>
<span class="header-section-number">13.4</span> Regular Expressions<a class="anchor" aria-label="anchor" href="#regex"><i class="fas fa-link"></i></a>
</h2>
<p>Regular expressions (regex) are a way to select certain <em>kinds</em> of characters. When you want to refer to a class/type of character, you can select them with a regex.</p>
<p>Regular expressions all get wrapped in brackets. So, to use any of these, wrap them in brackets. (i.e., they need double brackets in practice!):</p>
<ul>
<li>
<strong>[:punct:]</strong> - punctuation.</li>
<li>
<strong>[:alpha:]</strong> - letters.</li>
<li>
<strong>[:lower:]</strong> - lowercase letters.</li>
<li>
<strong>[:upper:]</strong> - upperclass letters.</li>
<li>
<strong>[:digit:]</strong> - digits.</li>
<li>
<strong>[:xdigit:]</strong> - hex digits.</li>
<li>
<strong>[:alnum:]</strong> - letters and numbers.</li>
<li>
<strong>[:cntrl:]</strong> - control characters.</li>
<li>
<strong>[:graph:]</strong> - letters, numbers, and punctuation.</li>
<li>
<strong>[:print:]</strong> - letters, numbers, punctuation, and whitespace.</li>
<li>
<strong>[:space:]</strong> - space characters (basically equivalent to <code>\s</code>).</li>
<li>
<strong>[:blank:]</strong> - space and tab.</li>
</ul>
</div>
<div id="extra-resources-2" class="section level2" number="13.5">
<h2>
<span class="header-section-number">13.5</span> Extra Resources<a class="anchor" aria-label="anchor" href="#extra-resources-2"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><a href="https://dplyr.tidyverse.org/reference/select.html">Select Vignette</a></li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="basic-wrangling.html"><span class="header-section-number">12</span> Basic Wrangling</a></div>
<div class="next"><a href="summarizing-data.html"><span class="header-section-number">14</span> Summarizing Data</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#advanced-wrangling"><span class="header-section-number">13</span> Advanced Wrangling</a></li>
<li>
<a class="nav-link" href="#helper-functions"><span class="header-section-number">13.1</span> Selecting</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#starts_with"><span class="header-section-number">13.1.1</span> starts_with()</a></li>
<li><a class="nav-link" href="#ends_with"><span class="header-section-number">13.1.2</span> ends_with()</a></li>
<li><a class="nav-link" href="#contains"><span class="header-section-number">13.1.3</span> contains()</a></li>
<li><a class="nav-link" href="#matches"><span class="header-section-number">13.1.4</span> matches()</a></li>
<li><a class="nav-link" href="#num_range"><span class="header-section-number">13.1.5</span> num_range()</a></li>
<li><a class="nav-link" href="#last_col"><span class="header-section-number">13.1.6</span> last_col()</a></li>
<li><a class="nav-link" href="#all_of"><span class="header-section-number">13.1.7</span> all_of()</a></li>
<li><a class="nav-link" href="#any_of"><span class="header-section-number">13.1.8</span> any_of()</a></li>
<li><a class="nav-link" href="#where"><span class="header-section-number">13.1.9</span> where()</a></li>
<li><a class="nav-link" href="#misc-selecting"><span class="header-section-number">13.1.10</span> Misc Selecting</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#filtering"><span class="header-section-number">13.2</span> Filtering</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#if_any"><span class="header-section-number">13.2.1</span> if_any()</a></li>
<li><a class="nav-link" href="#if_all"><span class="header-section-number">13.2.2</span> if_all()</a></li>
</ul>
</li>
<li><a class="nav-link" href="#mutating-across"><span class="header-section-number">13.3</span> Mutating across()</a></li>
<li><a class="nav-link" href="#regex"><span class="header-section-number">13.4</span> Regular Expressions</a></li>
<li><a class="nav-link" href="#extra-resources-2"><span class="header-section-number">13.5</span> Extra Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>PSYC193L</strong>" was written by Ethan Hurwitz. It was last built on 2022-06-26.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
