<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 12 Tidy Data and Tidyverse | Introduction to R</title>
<meta name="author" content="Ethan Hurwitz">
<meta name="description" content="12.1 Tidy Data You can represent the same data in many different ways. In almost all cases, the best way to do so is to make sure your data is tidy. In tidy data, each row corresponds to a unique...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 12 Tidy Data and Tidyverse | Introduction to R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://ethanhurwitz.github.io/intro-to-r/tidy-data-and-tidyverse.html">
<meta property="og:description" content="12.1 Tidy Data You can represent the same data in many different ways. In almost all cases, the best way to do so is to make sure your data is tidy. In tidy data, each row corresponds to a unique...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 12 Tidy Data and Tidyverse | Introduction to R">
<meta name="twitter:description" content="12.1 Tidy Data You can represent the same data in many different ways. In almost all cases, the best way to do so is to make sure your data is tidy. In tidy data, each row corresponds to a unique...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Introduction to R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Background</a></li>
<li class="book-part">R Basics</li>
<li><a class="" href="why-use-r.html"><span class="header-section-number">2</span> Why use R?</a></li>
<li><a class="" href="r-coding-basics.html"><span class="header-section-number">3</span> R Coding Basics</a></li>
<li><a class="" href="using-r-effectively.html"><span class="header-section-number">4</span> Using R Effectively</a></li>
<li><a class="" href="projects-and-organization.html"><span class="header-section-number">5</span> Projects and Organization</a></li>
<li class="book-part">Visualizations</li>
<li><a class="" href="intro-to-ggplot2.html"><span class="header-section-number">6</span> Intro to ggplot2</a></li>
<li><a class="" href="aesthetics.html"><span class="header-section-number">7</span> Aesthetics</a></li>
<li><a class="" href="different-geoms-and-when-to-use-them.html"><span class="header-section-number">8</span> Different Geoms and When To Use Them</a></li>
<li><a class="" href="customization.html"><span class="header-section-number">9</span> Customization</a></li>
<li><a class="" href="color-theory.html"><span class="header-section-number">10</span> Color Theory</a></li>
<li class="book-part">Data Manipulation</li>
<li><a class="" href="control-flow.html"><span class="header-section-number">11</span> Control Flow</a></li>
<li><a class="active" href="tidy-data-and-tidyverse.html"><span class="header-section-number">12</span> Tidy Data and Tidyverse</a></li>
<li><a class="" href="basic-wrangling.html"><span class="header-section-number">13</span> Basic Wrangling</a></li>
<li><a class="" href="advanced-wrangling.html"><span class="header-section-number">14</span> Advanced Wrangling</a></li>
<li><a class="" href="summarizing-data.html"><span class="header-section-number">15</span> Summarizing Data</a></li>
<li><a class="" href="text-cleaning.html"><span class="header-section-number">16</span> Text Cleaning</a></li>
<li><a class="" href="data-transformation.html"><span class="header-section-number">17</span> Data Transformation</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tidy-data-and-tidyverse" class="section level1">
<h1>
<span class="header-section-number">12</span> Tidy Data and Tidyverse<a class="anchor" aria-label="anchor" href="#tidy-data-and-tidyverse"><i class="fas fa-link"></i></a>
</h1>
<div id="Tidy-Data" class="section level2">
<h2>
<span class="header-section-number">12.1</span> Tidy Data<a class="anchor" aria-label="anchor" href="#Tidy-Data"><i class="fas fa-link"></i></a>
</h2>
<p>You can represent the same data in many different ways. In almost all cases, the best way to do so is to make sure your data is <strong>tidy</strong>. In tidy data, each row corresponds to a unique observation, each column is a variable, and each cell contains the value for a particular observation and variable.</p>
<p>The series of illustrations below helps explain the concept of tidy data and why it is useful!</p>
<p>What is tidy data?</p>
<div class="inline-figure"><img src="figures/tidydata_1.jpeg" style="width:100.0%"></div>
<p>Tidy data are like families.</p>
<div class="inline-figure"><img src="figures/tidydata_2.jpeg" style="width:100.0%"></div>
<p>Since you know all sets of tidy data will have the same structure, the same tools can be used across different datasets.</p>
<div class="inline-figure"><img src="figures/tidydata_3.jpeg" style="width:100.0%"></div>
<p>This enables universality with the tools being used, rather than all different people trying to accomplish the same task in different ways.</p>
<div class="inline-figure"><img src="figures/tidydata_4.jpeg" style="width:100.0%"></div>
<p>This makes your own life better by making it easier for automation &amp; iteration across your projects and datasets.</p>
<div class="inline-figure"><img src="figures/tidydata_5.jpeg" style="width:100.0%"></div>
<p>It also makes all other tidy datasets seem more welcoming!</p>
<div class="inline-figure"><img src="figures/tidydata_6.jpeg" style="width:100.0%"></div>
<img src="figures/tidydata_7.jpeg" style="width:100.0%"><p style="font-size:6pt">
Illustrations from the Openscapes blog Tidy Data for reproducibility, efficiency, and collaboration by Julia Lowndes and Allison Horst.
</p>
</div>
<div id="tidyverse" class="section level2">
<h2>
<span class="header-section-number">12.2</span> Tidyverse<a class="anchor" aria-label="anchor" href="#tidyverse"><i class="fas fa-link"></i></a>
</h2>
<p>tidyverse is a collection of packages that all “share an underlying design philosophy, grammar, and data structure” of tidy data. The tidyverse packages and functions are the tools you will use to fill your R workbench, and they will help with every step of your workflow.</p>
<img src="figures/environmental-data-science-r4ds-general.png" style="width:100.0%"><p style="font-size:6pt">
Updated from Grolemund &amp; Wickham’s classis R4DS schematic, envisioned by Dr. Julia Lowndes for her 2019 useR! keynote talk and illustrated by Allison Horst.
</p>
<p>This illustrates the Social/Data Science workflow that the tidyverse suite of packages are designed to help you accomplish:</p>
<ul>
<li><p><strong>Import</strong> – get data into R</p></li>
<li><p><strong>Tidy</strong> – clean and format the data</p></li>
<li><p><strong>Transform</strong> – select variables, create new ones, group and summarize</p></li>
<li><p><strong>Visualize</strong> – look at the data in different ways</p></li>
<li>
<p><del><strong>Model</strong></del> – <del>answer questions about the data</del></p>
<ul>
<li><em>modeling and statistics are not covered in this course</em></li>
</ul>
</li>
<li><p><strong>Communicate</strong> – write reproducible research reports</p></li>
</ul>
<p>The majority of the remaining course content will build your arsenal with tidyverse tools to help manage unruly raw data, as it will almost certainly be the case that the data you get initially will be very messy and need lots of cleaning and prepping!</p>
<img src="figures/unrulyData.jpeg" style="width:100.0%"><p style="font-size:6pt">
Artwork by <span class="citation">Horst (2022)</span>
</p>
</div>
<div id="investigating-data" class="section level2">
<h2>
<span class="header-section-number">12.3</span> Investigating Data<a class="anchor" aria-label="anchor" href="#investigating-data"><i class="fas fa-link"></i></a>
</h2>
<p>One of the first things you should do when working with a new dataset is to actually look at it. This might seem obvious and simple, but it is very important because it allows you to get a sense of what type of wrangling and manipulation you may need to apply to be able to work with that data.</p>
<div id="view-full" class="section level3">
<h3>
<span class="header-section-number">12.3.1</span> View Full<a class="anchor" aria-label="anchor" href="#view-full"><i class="fas fa-link"></i></a>
</h3>
<p>You can view a data object by using the <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> function. To inspect the <code>penguins</code> object you can run <code>View(penguins)</code> or click on the object itself in your RStudio’s global environment panel.</p>
</div>
<div id="glimpse" class="section level3">
<h3>
<span class="header-section-number">12.3.2</span> glimpse<a class="anchor" aria-label="anchor" href="#glimpse"><i class="fas fa-link"></i></a>
</h3>
<p>Often times datasets are very large and it is impractical to try and comb through the whole file. It would be much more helpful if there was a way to quickly glimpse at your data to get an overall impression of it. There is a very appropriately named function for this: <code><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse()</a></code>!</p>
<div class="sourceCode" id="cb241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 344</span></span>
<span><span class="co">#&gt; Columns: 8</span></span>
<span><span class="co">#&gt; $ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, …</span></span>
<span><span class="co">#&gt; $ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen,…</span></span>
<span><span class="co">#&gt; $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3…</span></span>
<span><span class="co">#&gt; $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6…</span></span>
<span><span class="co">#&gt; $ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181…</span></span>
<span><span class="co">#&gt; $ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650…</span></span>
<span><span class="co">#&gt; $ sex               &lt;fct&gt; male, female, female, NA, female…</span></span>
<span><span class="co">#&gt; $ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 20…</span></span></code></pre></div>
<p>From this one function alone, you can learn a lot about your data:</p>
<ol style="list-style-type: decimal">
<li><p>The names of the variables (columns), which you also can get with <code><a href="https://rdrr.io/r/base/names.html">names()</a></code>.</p></li>
<li><p>The number of observations (rows, 344) and variables (columns, 8). You can also get this information with the <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> and <code><a href="https://rdrr.io/r/base/nrow.html">ncol()</a></code> functions.</p></li>
<li><p>These variables are saved as either “fct” (factors), “dbl” (double-precision), or “int” (integers).</p></li>
</ol>
<!-- <div class="panel panel-success"> --><!--   <div class="panel-heading">**EXERCISE 6**</div> --><!--   <div class="panel-body"> --><!--   1. Use `glimpse()` to exam the `msleep` dataset.<br> --><!--   2. What information have you learned about this dataset from the output?</div> --><!-- </div> -->
</div>
<div id="head" class="section level3">
<h3>
<span class="header-section-number">12.3.3</span> head<a class="anchor" aria-label="anchor" href="#head"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse()</a></code> gives you a high level snapshot of your data, but it can also be useful to look at some actual rows of data. Looking at all of them at once is silly though. You really just want to look at a few observations to see if you can recognize anything that may need to be corrected. The <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> function can be used for this. It will print the first few rows of data in the argument you pass it to.</p>
<div class="sourceCode" id="cb242"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 x 8</span></span>
<span><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm</span></span>
<span><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7</span></span>
<span><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4</span></span>
<span><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18  </span></span>
<span><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA  </span></span>
<span><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3</span></span>
<span><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6</span></span>
<span><span class="co">#&gt; # … with 4 more variables: flipper_length_mm &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   body_mass_g &lt;int&gt;, sex &lt;fct&gt;, year &lt;int&gt;</span></span></code></pre></div>
<p>You can specify the exact amount of rows you want to print by passing a second argument to <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> that specifies the number of rows. E.g.,</p>
<div class="sourceCode" id="cb243"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 x 8</span></span>
<span><span class="co">#&gt;    species island    bill_length_mm bill_depth_mm</span></span>
<span><span class="co">#&gt;    &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Adelie  Torgersen           39.1          18.7</span></span>
<span><span class="co">#&gt;  2 Adelie  Torgersen           39.5          17.4</span></span>
<span><span class="co">#&gt;  3 Adelie  Torgersen           40.3          18  </span></span>
<span><span class="co">#&gt;  4 Adelie  Torgersen           NA            NA  </span></span>
<span><span class="co">#&gt;  5 Adelie  Torgersen           36.7          19.3</span></span>
<span><span class="co">#&gt;  6 Adelie  Torgersen           39.3          20.6</span></span>
<span><span class="co">#&gt;  7 Adelie  Torgersen           38.9          17.8</span></span>
<span><span class="co">#&gt;  8 Adelie  Torgersen           39.2          19.6</span></span>
<span><span class="co">#&gt;  9 Adelie  Torgersen           34.1          18.1</span></span>
<span><span class="co">#&gt; 10 Adelie  Torgersen           42            20.2</span></span>
<span><span class="co">#&gt; # … with 4 more variables: flipper_length_mm &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   body_mass_g &lt;int&gt;, sex &lt;fct&gt;, year &lt;int&gt;</span></span></code></pre></div>
<!-- <div class="panel panel-success"> -->
<!--   <div class="panel-heading">**EXERCISE 7**</div> -->
<!--   <div class="panel-body"> -->
<!--   1. Use `head()` to exam the `msleep` dataset.<br> -->
<!--   2. Modify your `head()` call to look at the first 7 rows of data.</div> -->
<!-- </div> -->
<!-- You will see `head()` used in several of the examples below to help make the output more digestible. -->

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="control-flow.html"><span class="header-section-number">11</span> Control Flow</a></div>
<div class="next"><a href="basic-wrangling.html"><span class="header-section-number">13</span> Basic Wrangling</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tidy-data-and-tidyverse"><span class="header-section-number">12</span> Tidy Data and Tidyverse</a></li>
<li><a class="nav-link" href="#Tidy-Data"><span class="header-section-number">12.1</span> Tidy Data</a></li>
<li><a class="nav-link" href="#tidyverse"><span class="header-section-number">12.2</span> Tidyverse</a></li>
<li>
<a class="nav-link" href="#investigating-data"><span class="header-section-number">12.3</span> Investigating Data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#view-full"><span class="header-section-number">12.3.1</span> View Full</a></li>
<li><a class="nav-link" href="#glimpse"><span class="header-section-number">12.3.2</span> glimpse</a></li>
<li><a class="nav-link" href="#head"><span class="header-section-number">12.3.3</span> head</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Introduction to R</strong>" was written by Ethan Hurwitz. It was last built on 2022-07-31.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
